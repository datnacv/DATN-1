<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ACV Store - Trang ch·ªß</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"/>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* Enhanced Custom styles - M√†u #181e34 */
    :root {
      --primary-color: #181e34;
      --primary-dark: #000340;
      --primary-light: #1a1a7e;
      --secondary-color: #e6f0ff;
      --accent-color: #3366ff;
    }

    .navbar {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      backdrop-filter: blur(10px);
    }

    .product-card {
      transition: all 0.3s ease;
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid #f1f5f9;
    }

    .product-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 8px 25px rgba(0, 4, 98, 0.15);
      border-color: var(--primary-color);
    }

    .badge-new {
      background: linear-gradient(45deg, var(--primary-color), var(--primary-light));
      border-radius: 20px;
    }

    .size-option {
      transition: all 0.2s ease;
      border-radius: 8px;
    }

    .size-option.active {
      background: linear-gradient(45deg, var(--primary-color), var(--primary-light));
      color: white;
      transform: scale(1.05);
    }

    .swiper-slide img {
      object-fit: cover;
      height: 450px;
    }

    .ticker {
      background: linear-gradient(90deg, var(--secondary-color), #f0f8ff);
      color: var(--primary-color);
      font-weight: bold;
      border-bottom: 2px solid var(--primary-color);
    }

    .dropdown-menu {
      display: none;
      position: absolute;
      background-color: white;
      min-width: 200px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      z-index: 1000;
      border-radius: 12px;
      border: none;
      padding: 8px 0;
    }

    .dropdown:hover .dropdown-menu {
      display: block;
      animation: fadeInDown 0.3s ease;
    }

    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .cart-icon {
      transition: all 0.3s ease;
    }

    .cart-icon:hover {
      transform: scale(1.1);
      background-color: var(--primary-color) !important;
    }

    .cart-icon:hover i {
      color: white !important;
    }

    .search-container {
      position: relative;
      overflow: hidden;
      border-radius: 25px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    .search-input {
      border: none;
      outline: none;
      padding: 12px 50px 12px 20px;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .search-input:focus {
      box-shadow: 0 0 0 3px rgba(0, 4, 98, 0.2);
    }

    .section-title {
      position: relative;
      display: inline-block;
      margin-bottom: 2rem;
    }

    .section-title::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 0;
      width: 60px;
      height: 3px;
      background: linear-gradient(90deg, var(--primary-color), var(--primary-light));
      border-radius: 2px;
    }

    .price {
      font-size: 16px;
      font-weight: 700;
      color: var(--primary-color) !important;
    }

    .modal-content {
      border-radius: 15px;
      border: none;
      overflow: hidden;
    }

    .quantity-btn {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      border: 2px solid #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background: white;
    }

    .quantity-btn:hover {
      border-color: var(--primary-color);
      background-color: var(--primary-color);
      color: white;
    }

    body {
      padding-top: 110px;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    /* Loading animation */
    .loading-spinner {
      display: none;
      width: 20px;
      height: 20px;
      border: 2px solid #f3f3f3;
      border-top: 2px solid var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Toast notification */
    .toast-container {
      position: fixed;
      top: 120px;
      right: 20px;
      z-index: 9999;
    }

    .custom-toast {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      color: white;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0, 4, 98, 0.3);
    }

    .product-image {
      transition: transform 0.3s ease;
    }

    .product-card:hover .product-image {
      transform: scale(1.05);
    }

    /* Custom button styles */
    .btn-primary-custom {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      border: none;
      color: white;
    }

    .btn-primary-custom:hover {
      background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
      color: white;
    }

    .btn-outline-primary-custom {
      border: 2px solid var(--primary-color);
      color: var(--primary-color);
      background: transparent;
    }

    .btn-outline-primary-custom:hover {
      background: var(--primary-color);
      color: white;
    }

    /* Swiper custom colors */
    .swiper-button-next,
    .swiper-button-prev {
      color: var(--primary-color) !important;
    }

    .swiper-pagination-bullet-active {
      background: var(--primary-color) !important;
    }

    /* Ticker animation color */
    .ticker i {
      color: var(--primary-color) !important;
    }

    @media (max-width: 640px) {
      .swiper-slide img { height: 250px; }
      .product-grid { grid-template-columns: repeat(2, 1fr); gap: 12px; }
      .dropdown-menu { width: 100%; left: 0; }
      body { padding-top: 90px; }
      .section-title { font-size: 1.5rem; }
    }
  </style>
</head>
<body class="bg-gray-50">

<!-- Toast Container -->
<div class="toast-container">
  <div id="successToast" class="toast custom-toast" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-body d-flex align-items-center">
      <i class="fas fa-check-circle me-2"></i>
      <span>ƒê√£ th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng!</span>
    </div>
  </div>
</div>

<!-- Enhanced Ticker -->
<div class="ticker py-2 overflow-hidden fixed top-0 w-full z-50">
  <div class="d-flex align-items-center">
    <i class="fas fa-fire me-2 ms-3"></i>
    <marquee behavior="scroll" direction="left" scrollamount="3">
      üéâ FLASH SALE: Gi·∫£m gi√° l√™n ƒë·∫øn 70% cho t·∫•t c·∫£ s·∫£n ph·∫©m h√¥m nay! üéâ | üöö Mi·ªÖn ph√≠ v·∫≠n chuy·ªÉn cho ƒë∆°n t·ª´ 299k! | üíé T√≠ch ƒëi·ªÉm ƒë·ªïi qu√† h·∫•p d·∫´n!
    </marquee>
  </div>
</div>

<!-- Enhanced Header -->
<nav class="navbar fixed-top shadow-lg mt-12 z-40">
  <div class="container mx-auto flex items-center justify-between py-3 px-4">
    <!-- Logo with animation -->
    <a href="/" class="text-2xl font-bold text-white hover:scale-105 transition-transform duration-300">
      <i class="fas fa-store me-2"></i>ACV Store
    </a>

    <!-- Enhanced Menu Dropdown -->
    <div class="relative dropdown">
      <button class="text-white font-semibold hover:text-blue-200 focus:outline-none d-flex align-items-center">
        <i class="fas fa-bars me-2"></i>Danh m·ª•c <i class="fas fa-caret-down ms-1"></i>
      </button>
      <div class="dropdown-menu bg-white text-gray-800 mt-2">
        <a href="/category/nam" class="block px-4 py-3 hover:bg-blue-50 d-flex align-items-center">
          <i class="fas fa-male me-2 text-blue-500"></i>Th·ªùi trang Nam
        </a>
        <a href="/category/nu" class="block px-4 py-3 hover:bg-blue-50 d-flex align-items-center">
          <i class="fas fa-female me-2 text-pink-500"></i>Th·ªùi trang N·ªØ
        </a>
        <a href="/category/phu-kien" class="block px-4 py-3 hover:bg-blue-50 d-flex align-items-center">
          <i class="fas fa-gem me-2 text-purple-500"></i>Ph·ª• ki·ªán
        </a>
        <a href="/category/gia-dung" class="block px-4 py-3 hover:bg-blue-50 d-flex align-items-center">
          <i class="fas fa-home me-2 text-green-500"></i>Gia d·ª•ng
        </a>
      </div>
    </div>

    <!-- Enhanced Search Bar -->
    <div class="flex-1 mx-4 max-w-2xl">
      <div class="search-container">
        <input type="text" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m, th∆∞∆°ng hi·ªáu..." class="search-input w-full"/>
        <button class="absolute right-3 top-1/2 transform -translate-y-1/2 text-white px-4 py-2 rounded-full transition-colors" style="background: var(--primary-color);">
          <i class="fas fa-search"></i>
        </button>
      </div>
    </div>

    <!-- Enhanced Cart Icon -->
    <div class="position-relative">
      <a href="/cart" class="text-white text-xl hover:text-blue-200 transition-colors">
        <i class="fas fa-shopping-cart"></i>
      </a>
    </div>
  </div>
</nav>

<!-- Enhanced Modal - Gi·ªØ nguy√™n backend logic -->
<div class="modal fade" id="addToCartModal" tabindex="-1" aria-labelledby="addToCartModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header" style="background: linear-gradient(135deg, #181e34, #1a1a7e);">
        <h5 class="modal-title text-white" id="addToCartModalLabel">
          <i class="fas fa-cart-plus me-2"></i>Th√™m v√†o gi·ªè h√†ng
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body p-4">
        <div class="modal-product-info d-flex align-items-center mb-4 p-3 bg-light rounded">
          <img id="modalProductImage" src="/placeholder.svg" alt="Product Image" class="rounded" style="width: 80px; height: 80px; object-fit: cover;">
          <div class="ms-3">
            <h6 id="modalProductName" class="font-semibold mb-1"></h6>
            <p id="modalProductPrice" class="font-bold mb-0 fs-5" style="color: var(--primary-color);"></p>
          </div>
        </div>

        <div class="size-selection mb-4">
          <h6 class="font-semibold mb-3"><i class="fas fa-ruler me-2"></i>Ch·ªçn size:</h6>
          <div class="size-options d-flex gap-2">
            <button class="size-option px-3 py-2 border rounded active">S</button>
            <button class="size-option px-3 py-2 border rounded">M</button>
            <button class="size-option px-3 py-2 border rounded">L</button>
            <button class="size-option px-3 py-2 border rounded">XL</button>
          </div>
        </div>

        <div class="quantity-selection">
          <h6 class="font-semibold mb-3"><i class="fas fa-sort-numeric-up me-2"></i>S·ªë l∆∞·ª£ng:</h6>
          <div class="quantity-control d-flex align-items-center gap-3">
            <button class="quantity-btn minus">-</button>
            <input type="number" value="1" min="1" class="quantity-input form-control text-center" style="width: 80px;">
            <button class="quantity-btn plus">+</button>
          </div>
        </div>
      </div>
      <div class="modal-footer border-0 pt-0">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
          <i class="fas fa-times me-2"></i>ƒê√≥ng
        </button>
        <button type="button" class="btn text-white" style="background: linear-gradient(135deg, #181e34, #1a1a7e);" id="confirmAddToCart">
          <span class="loading-spinner me-2"></span>
          <i class="fas fa-cart-plus me-2"></i>Th√™m v√†o gi·ªè
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Banner Slider - Gi·ªØ nguy√™n -->
<div class="mt-0 mb-5">
  <div class="swiper banner-slider">
    <div class="swiper-wrapper">
      <div class="swiper-slide">
        <img src="https://file.hstatic.net/200000503583/collection/ao-nam-2022_71fff4523ebe4fbd9722928187580776.jpg" alt="Banner 1" class="w-full"/>
      </div>
      <div class="swiper-slide">
        <img src="https://file.hstatic.net/1000253775/file/kt_dn_dk.jpg" alt="Banner 2" class="w-full"/>
      </div>
      <div class="swiper-slide">
        <img src="https://4menshop.com/images/thumbs/news/-602.jpg" alt="Banner 3" class="w-full"/>
      </div>
    </div>
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
    <div class="swiper-pagination"></div>
  </div>
</div>

<!-- Section S·∫£n ph·∫©m m·ªõi - Gi·ªØ nguy√™n backend logic -->
<section class="container mx-auto py-8">
  <h2 class="section-title text-3xl font-bold text-gray-800">
    <i class="fas fa-star text-yellow-500 me-2"></i>S·∫£n ph·∫©m m·ªõi
  </h2>
  <div class="product-grid grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
    <div class="product-card bg-white shadow-md overflow-hidden" th:each="product : ${newProducts}">
      <div class="relative">
        <a th:href="@{/chitietsanpham(id=${product.id})}">
          <img th:src="${product.urlHinhAnh}" th:alt="${product.tenSanPham}" class="product-image w-full h-48 object-cover"/>
        </a>
        <span class="badge-new absolute top-3 left-3 text-white text-xs font-semibold px-3 py-1">
          <i class="fas fa-sparkles me-1"></i>M·ªõi
        </span>
        <button class="cart-icon absolute top-3 right-3 bg-white p-2 rounded-full shadow-md"
                th:attr="data-product-id=${product.id},data-product-name=${product.tenSanPham},data-product-price=${product.price},data-product-img=${product.urlHinhAnh}">
          <i class="fas fa-shopping-cart" style="color: var(--primary-color);"></i>
        </button>
      </div>
      <a th:href="@{/chitietsanpham(id=${product.id})}" class="block p-4">
        <h4 th:text="${product.tenSanPham}" class="text-sm font-semibold text-gray-800 truncate mb-2"></h4>
        <div class="price font-bold" th:text="${product.price}"></div>
      </a>
    </div>
  </div>
  <div class="text-center mt-8">
    <a href="new.html" class="btn btn-outline-primary-custom btn-lg rounded-pill px-5">
      <i class="fas fa-eye me-2"></i>Xem t·∫•t c·∫£ s·∫£n ph·∫©m m·ªõi
    </a>
  </div>
</section>

<!-- Section S·∫£n Ph·∫©m All - Gi·ªØ nguy√™n backend logic -->
<section class="container mx-auto py-8 bg-white rounded-lg shadow-sm">
  <h2 class="section-title text-3xl font-bold text-gray-800">
    <i class="fas fa-th-large me-2" style="color: var(--primary-color);"></i>S·∫£n Ph·∫©m
  </h2>
  <div class="product-grid grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
    <div class="product-card bg-white shadow-md overflow-hidden" th:each="product : ${summerProducts}">
      <div class="relative">
        <a th:href="@{/chitietsanpham(id=${product.id})}">
          <img th:src="${product.urlHinhAnh}" th:alt="${product.tenSanPham}" class="product-image w-full h-48 object-cover"/>
        </a>
        <button class="cart-icon absolute top-3 right-3 bg-white p-2 rounded-full shadow-md"
                th:attr="data-product-id=${product.id},data-product-name=${product.tenSanPham},data-product-price=${product.price},data-product-img=${product.urlHinhAnh}">
          <i class="fas fa-shopping-cart" style="color: var(--primary-color);"></i>
        </button>
      </div>
      <a th:href="@{/chitietsanpham(id=${product.id})}" class="block p-4">
        <h4 th:text="${product.tenSanPham}" class="text-sm font-semibold text-gray-800 truncate mb-2"></h4>
        <div class="price font-bold" th:text="${product.price}"></div>
      </a>
    </div>
  </div>
  <div class="text-center mt-8">
    <a href="#" class="btn btn-outline-primary-custom btn-lg rounded-pill px-5">
      <i class="fas fa-eye me-2"></i>Xem t·∫•t c·∫£ s·∫£n ph·∫©m
    </a>
  </div>
</section>

<!-- Section B√°n Ch·∫°y - Gi·ªØ nguy√™n backend logic -->
<section class="container mx-auto py-8">
  <h2 class="section-title text-3xl font-bold text-gray-800">
    <i class="fas fa-fire text-red-500 me-2"></i>S·∫£n ph·∫©m b√°n ch·∫°y
  </h2>
  <div class="product-grid grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
    <div class="product-card bg-white shadow-md overflow-hidden" th:each="product : ${bestsellerProducts}">
      <div class="relative">
        <a th:href="@{/chitietsanpham(id=${product.id})}">
          <img th:src="${product.urlHinhAnh}" th:alt="${product.tenSanPham}" class="product-image w-full h-48 object-cover"/>
        </a>
        <span class="absolute top-3 left-3 text-white text-xs font-semibold px-3 py-1 rounded-full bg-red-500">
          <i class="fas fa-fire me-1"></i>Hot
        </span>
        <button class="cart-icon absolute top-3 right-3 bg-white p-2 rounded-full shadow-md"
                th:attr="data-product-id=${product.id},data-product-name=${product.tenSanPham},data-product-price=${product.price},data-product-img=${product.urlHinhAnh}">
          <i class="fas fa-shopping-cart" style="color: var(--primary-color);"></i>
        </button>
      </div>
      <a th:href="@{/chitietsanpham(id=${product.id})}" class="block p-4">
        <h4 th:text="${product.tenSanPham}" class="text-sm font-semibold text-gray-800 truncate mb-2"></h4>
        <div class="price font-bold" th:text="${product.price}"></div>
      </a>
    </div>
  </div>
  <div class="text-center mt-8">
    <a href="#" class="btn btn-outline-danger btn-lg rounded-pill px-5">
      <i class="fas fa-fire me-2"></i>Xem t·∫•t c·∫£ s·∫£n ph·∫©m hot
    </a>
  </div>
</section>

<!-- Enhanced Footer -->
<footer class="text-white py-12" style="background: linear-gradient(135deg, #181e34, #1a1a7e);">
  <div class="container mx-auto">
    <div class="row">
      <div class="col-lg-4 col-md-6 mb-4">
        <h3 class="text-2xl font-bold mb-4">
          <i class="fas fa-store me-2 text-blue-300"></i>ACV Store
        </h3>
        <p class="text-blue-100 mb-4">C·ª≠a h√†ng th·ªùi trang h√†ng ƒë·∫ßu v·ªõi c√°c s·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng cao v√† gi√° c·∫£ h·ª£p l√Ω. Ch√∫ng t√¥i cam k·∫øt mang ƒë·∫øn tr·∫£i nghi·ªám mua s·∫Øm tuy·ªát v·ªùi nh·∫•t.</p>
        <div class="d-flex gap-3">
          <a href="#" class="text-white hover:text-blue-300 transition-colors fs-5">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="#" class="text-white hover:text-blue-300 transition-colors fs-5">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="#" class="text-white hover:text-blue-300 transition-colors fs-5">
            <i class="fab fa-twitter"></i>
          </a>
          <a href="#" class="text-white hover:text-blue-300 transition-colors fs-5">
            <i class="fab fa-youtube"></i>
          </a>
        </div>
      </div>

      <div class="col-lg-2 col-md-6 mb-4">
        <h4 class="text-lg font-bold mb-4 text-blue-300">Li√™n k·∫øt nhanh</h4>
        <ul class="list-unstyled space-y-2">
          <li><a href="#" class="text-blue-100 hover:text-blue-300 transition-colors">S·∫£n ph·∫©m m·ªõi</a></li>
          <li><a href="#" class="text-blue-100 hover:text-blue-300 transition-colors">T·ªß ƒë·ªì m√πa h√®</a></li>
          <li><a href="#" class="text-blue-100 hover:text-blue-300 transition-colors">S·∫£n ph·∫©m b√°n ch·∫°y</a></li>
        </ul>
      </div>

      <div class="col-lg-2 col-md-6 mb-4">
        <h4 class="text-lg font-bold mb-4 text-blue-300">H·ªó tr·ª£</h4>
        <ul class="list-unstyled space-y-2">
          <li><a href="#" class="text-blue-100 hover:text-blue-300 transition-colors">Ch√≠nh s√°ch ƒë·ªïi tr·∫£</a></li>
          <li><a href="#" class="text-blue-100 hover:text-blue-300 transition-colors">H∆∞·ªõng d·∫´n mua h√†ng</a></li>
          <li><a href="#" class="text-blue-100 hover:text-blue-300 transition-colors">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></li>
          <li><a href="#" class="text-blue-100 hover:text-blue-300 transition-colors">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a></li>
        </ul>
      </div>

      <div class="col-lg-4 col-md-6 mb-4">
        <h4 class="text-lg font-bold mb-4 text-blue-300">Li√™n h·ªá</h4>
        <div class="space-y-3">
          <p class="text-blue-100 d-flex align-items-center">
            <i class="fas fa-envelope me-3 text-blue-300"></i>
            support@acvstore.com
          </p>
          <p class="text-blue-100 d-flex align-items-center">
            <i class="fas fa-phone me-3 text-blue-300"></i>
            0123 456 789
          </p>
          <p class="text-blue-100 d-flex align-items-start">
            <i class="fas fa-map-marker-alt me-3 text-blue-300 mt-1"></i>
            123 ƒê∆∞·ªùng ABC, Qu·∫≠n XYZ, TP.HCM
          </p>
        </div>
      </div>
    </div>

    <hr class="my-8" style="border-color: #1a1a7e;">
    <div class="text-center">
      <p class="text-blue-200">¬© 2025 ACV Store. All rights reserved.</p>
    </div>
  </div>
</footer>

<!-- JavaScript Libraries -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>

<script>
  // Enhanced Swiper initialization
  new Swiper('.banner-slider', {
    loop: true,
    autoplay: {
      delay: 4000,
      disableOnInteraction: false,
    },
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
      dynamicBullets: true,
    },
  });

  // Enhanced Cart Modal Functionality - Gi·ªØ nguy√™n logic
  document.querySelectorAll('.cart-icon').forEach(button => {
    button.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();

      const modal = new bootstrap.Modal(document.getElementById('addToCartModal'));
      const modalElement = document.getElementById('addToCartModal');

      // Set product info t·ª´ backend data
      document.getElementById('modalProductImage').src = button.dataset.productImg;
      document.getElementById('modalProductName').textContent = button.dataset.productName;
      document.getElementById('modalProductPrice').textContent = button.dataset.productPrice;

      modal.show();

      // Enhanced Quantity controls
      const minusBtn = modalElement.querySelector('.quantity-btn.minus');
      const plusBtn = modalElement.querySelector('.quantity-btn.plus');
      const input = modalElement.querySelector('.quantity-input');

      // Remove existing event listeners
      minusBtn.replaceWith(minusBtn.cloneNode(true));
      plusBtn.replaceWith(plusBtn.cloneNode(true));

      const newMinusBtn = modalElement.querySelector('.quantity-btn.minus');
      const newPlusBtn = modalElement.querySelector('.quantity-btn.plus');

      newMinusBtn.addEventListener('click', () => {
        if (input.value > 1) {
          input.value = parseInt(input.value) - 1;
        }
      });

      newPlusBtn.addEventListener('click', () => {
        input.value = parseInt(input.value) + 1;
      });

      // Enhanced Size selection
      const sizeOptions = modalElement.querySelectorAll('.size-option');
      sizeOptions.forEach(option => {
        option.addEventListener('click', () => {
          sizeOptions.forEach(opt => opt.classList.remove('active'));
          option.classList.add('active');
        });
      });

      // Enhanced Add to cart confirmation
      const confirmBtn = modalElement.querySelector('#confirmAddToCart');
      confirmBtn.addEventListener('click', () => {
        const spinner = confirmBtn.querySelector('.loading-spinner');
        const icon = confirmBtn.querySelector('.fas');

        // Show loading
        spinner.style.display = 'inline-block';
        icon.style.display = 'none';
        confirmBtn.disabled = true;

        // Simulate API call - C√≥ th·ªÉ thay b·∫±ng actual backend call
        setTimeout(() => {
          // Hide loading
          spinner.style.display = 'none';
          icon.style.display = 'inline';
          confirmBtn.disabled = false;

          // Close modal
          modal.hide();

          // Show success toast
          const toast = new bootstrap.Toast(document.getElementById('successToast'));
          toast.show();
        }, 1000);
      });
    });
  });

  // Search functionality enhancement
  const searchInput = document.querySelector('.search-input');
  searchInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      // C√≥ th·ªÉ implement search functionality v·ªõi backend
      console.log('Searching for:', this.value);
    }
  });
</script>

</body>
</html>